
let arr = [`
<div class="col-lg-3">
    <div class="card">
        <img src="img/food5.jpg" class="card-img-top" alt="...">
        <div class="card-body crd">
            <h5 class="card-title title">food 5</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 5</p>
            <div class="date mb-2">
             <i class="fa-solid fa-calendar me-1"></i><span></span>
        </div>
            <h3 class="mb-3 price">20</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/th 2.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">food 6</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 6</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">23</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/th 4.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">food 7</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 7</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">35</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/th6.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">food 8</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 8</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">13</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>`, `
<div class="col-lg-3">
    <div class="card">
        <img src="img/insta-1.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">jacket 5</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 5</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">24</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/insta-2.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">jacket 6</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 6</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">43</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/insta-3.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">jacket 7</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 7</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">31</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/insta-4.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">jacket 8</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 8</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">9</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>`, `
<div class="col-lg-3">
    <div class="card">
        <img src="img/samsung3.jpeg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">samsung 1</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 5</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">720</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/samsung4.jpeg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">samsung 2</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 6</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">315</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/samsung5.jpeg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">samsung3</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 7</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">625</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
<div class="col-lg-3">
    <div class="card">
        <img src="img/samsung6.jpeg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title title">samsung4</h5>
            <p class="card-text">Lorem ipsum dolor, sit amet consectetur adipisicing elit. 8</p>
            <div class="date mb-2">
            <i class="fa-solid fa-calendar me-1"></i><span></span>
       </div>
            <h3 class="mb-3 price">900</h3>
            <a href="#" class="btn btn-primary">Add To Cart</a>
        </div>
    </div>
</div>
`]

let arrDateOut = [
    "2021-05-06",
    "2021-08-23",
    "2021-10-04",
    "2021-04-25",
    "2021-02-14",
    "2021-01-20",
    "2021-01-02",
    "2021-12-05"
];



function dateInPage() {
    let date = document.querySelectorAll(".newElm .date span");
    for (let i = 0; i < arrDateOut.length; i++) {
        if (date[i] !== undefined) {
            date[i].innerHTML = arrDateOut[i];

        }
    }
}

let AllProduct = document.querySelectorAll(".all h3");
let div = document.querySelectorAll(".Products");
let slctLevel = document.getElementById("slct");
var x;

AllProduct.forEach((el, index) => {
    div.forEach((di, index2) => {
        el.addEventListener("click", (e) => {
            document.querySelector(".moreProduct").classList.add("notsh");
            document.querySelector(".less").classList.add("notsh");
            document.querySelector(".oldpage").classList.remove("bck");
            di.childNodes[1].childNodes[1].childNodes[3].style.display = "None";
            document.querySelector(".newElm").classList.remove("bck");
            slctLevel.style.display = "block";
            di.style.display = "None";
            // addToCart();
            if (index == index2) {
                document.querySelector(".newElm").innerHTML = di.innerHTML;
                document.querySelector(".pr").innerHTML += `${arr[index]}`;
                dateInPage();
                addToCart();
                x = index;
            }

        })
    })
})
let fd = Array.from(document.querySelectorAll(".food .pr > div"));
let clothes = Array.from(document.querySelectorAll(".clothes .pr > div"));
let phone = Array.from(document.querySelectorAll(".Phones .pr > div"));
let a = [];
a.push(fd, clothes, phone);

function normalProdut() {
    document.querySelector(".pr").innerHTML = "";

    for (let i = 0; i < a[x].length; i++) {
        document.querySelector(".pr").innerHTML += `<div class="col-lg-3">${a[x][i].innerHTML}</div>`;
    }

    document.querySelector(".pr").innerHTML += `${arr[x]}`;

    document.querySelectorAll(".newElm  .date span").forEach((d, index1) => {
        arrDateOut.forEach((el, index2) => {
            if (index1 == index2) {
                d.innerHTML = el;
            }
        })
    })

}

slctLevel.onchange = () => {
    if (slctLevel.value == "normal") {

        normalProdut();
    }
    if (slctLevel.value == "high") {
        sortProduct();
    }
    if (slctLevel.value == "low") {
        sortLowProduct();
    }
    if (slctLevel.value == "date") {
        sortLowWithDate();
    }
}

function sortLowWithDate() {
    let arrElm = [];
    let stckarr = [];
    let arrP = [];
    let s = "";
    let arrTi = [];
    let arrPara = [];
    let arrImg = [];

    document.querySelectorAll(".newElm span").forEach(l => {
        arrElm.push(l.parentElement.parentElement.parentElement);
    })
    for (let i = 0; i < arrElm.length; i++) {
        let dtText = arrElm[i].querySelector("span");
        let pricei = arrElm[i].querySelector(".price");
        let title = arrElm[i].querySelector(".title");
        let parag = arrElm[i].querySelector("p");
        let img = arrElm[i].querySelector("img");

        stckarr.push(dtText);
        arrP.push(pricei);
        arrTi.push(title);
        arrPara.push(parag);
        arrImg.push(img);
    }

    for (let k = 0; k < stckarr.length; k++) {

        for (let j = k + 1; j < stckarr.length; j++) {
            if (stckarr[k].innerHTML > stckarr[j].innerHTML) {
                s = stckarr[k].innerHTML;
                stckarr[k].innerHTML = stckarr[j].innerHTML;
                stckarr[j].innerHTML = s;

                s = arrP[k].innerHTML;
                arrP[k].innerHTML = arrP[j].innerHTML;
                arrP[j].innerHTML = s;

                s = arrTi[k].innerHTML;
                arrTi[k].innerHTML = arrTi[j].innerHTML;
                arrTi[j].innerHTML = s;

                s = arrPara[k].innerHTML;
                arrPara[k].innerHTML = arrPara[j].innerHTML;
                arrPara[j].innerHTML = s;

                s = arrImg[k].src;
                arrImg[k].src = arrImg[j].src;
                arrImg[j].src = s;

            }
        }
    }




}

function sortProduct() {
    let pro = document.querySelectorAll(".newElm .newEL > div");
    let arrP = [];
    // let s = "";
    // let arrTi = [];
    // let arrPara = [];
    // let arrImg = [];
    // let arrDt = [];
    for (let i = 0; i < pro.length; i++) {

        let pricei = pro[i].querySelector(".price");
        // let title = pro[i].querySelector(".title");
        // let parag = pro[i].querySelector("p");
        // let img = pro[i].querySelector("img");
        // let date = pro[i].querySelector(".date span");

        arrP.push(pricei);
        // arrTi.push(title);
        // arrPara.push(parag);
        // arrImg.push(img);
        // arrDt.push(date);


    }
    let ap = [];
    for (let l = 0; l < arrP.length; l++) {
        ap.push(arrP[l].innerHTML)
    }
    let arrSorted = ap.sort((a, b) => {
        return b - a;
    })
    // console.log(arrSorted, "=>", arrP)
    for (let i = 0; i < arrSorted.length; i++) {
        for (let j = 0; j < arrP.length; j++) {
            if (arrSorted[i] == arrP[j].innerHTML) {
                arrP[j].parentElement.parentElement.parentElement.style.order = i;
            }
        }
    }

    // for (let k = 0; k < arrP.length; k++) {

    //     for (let j = k + 1; j < arrP.length; j++) {

    //         if (parseInt(arrP[k].innerHTML) < parseInt(arrP[j].innerHTML)) {

    //             s = arrP[k].innerHTML;
    //             arrP[k].innerHTML = arrP[j].innerHTML;
    //             arrP[j].innerHTML = s;

    //             s = arrTi[k].innerHTML;
    //             arrTi[k].innerHTML = arrTi[j].innerHTML;
    //             arrTi[j].innerHTML = s;

    //             s = arrPara[k].innerHTML;
    //             arrPara[k].innerHTML = arrPara[j].innerHTML;
    //             arrPara[j].innerHTML = s;

    //             s = arrImg[k].src;
    //             arrImg[k].src = arrImg[j].src;
    //             arrImg[j].src = s;

    //             s = arrDt[k].innerHTML;
    //             arrDt[k].innerHTML = arrDt[j].innerHTML;
    //             arrDt[j].innerHTML = s;

    //         }
    //     }
    // }
}
function sortLowProduct() {
    let pro = document.querySelectorAll(".newElm .newEL > div");
    let arrP = [];
    let s = "";
    let arrTi = [];
    let arrPara = [];
    let arrImg = [];
    let arrDt = [];
    for (let i = 0; i < pro.length; i++) {

        let pricei = pro[i].querySelector(".price");
        let title = pro[i].querySelector(".title");
        let parag = pro[i].querySelector("p");
        let img = pro[i].querySelector("img");
        let date = pro[i].querySelector(".date span");

        arrP.push(pricei);
        arrTi.push(title);
        arrPara.push(parag);
        arrImg.push(img);
        arrDt.push(date);


    }

    for (let k = 0; k < arrP.length; k++) {

        for (let j = k + 1; j < arrP.length; j++) {

            if (parseInt(arrP[k].innerHTML) > parseInt(arrP[j].innerHTML)) {
                s = arrP[k].innerHTML;
                arrP[k].innerHTML = arrP[j].innerHTML;
                arrP[j].innerHTML = s;

                s = arrTi[k].innerHTML;
                arrTi[k].innerHTML = arrTi[j].innerHTML;
                arrTi[j].innerHTML = s;

                s = arrPara[k].innerHTML;
                arrPara[k].innerHTML = arrPara[j].innerHTML;
                arrPara[j].innerHTML = s;

                s = arrImg[k].src;
                arrImg[k].src = arrImg[j].src;
                arrImg[j].src = s;

                s = arrDt[k].innerHTML;
                arrDt[k].innerHTML = arrDt[j].innerHTML;
                arrDt[j].innerHTML = s;

            }
        }
    }
}



document.querySelector(".oldpage").onclick = (e) => {

    document.querySelector(".moreProduct").classList.remove("notsh");
    document.querySelector(".less").classList.remove("notsh");
    slctLevel.style.display = "none";
    div.forEach(el => {
        document.querySelectorAll(".bt").forEach(bt => {
            if (bt.classList.contains("moreProduct") && (!el.classList.contains("Phones"))
                || bt.classList.contains("showOldPage") && el.classList.contains("Phones")) {
                el.style.display = "block";
            }
        })
        el.childNodes[1].childNodes[1].childNodes[3].style.display = "block";
        e.currentTarget.classList.add("bck");
        document.querySelector(".newElm").innerHTML = " ";
    })
}


let btn = document.querySelectorAll(".bt");
btn.forEach(btn => {
    btn.addEventListener("click", (e) => {
        if (e.currentTarget.classList.contains("moreProduct")) {
            document.querySelector(".Phones").style.display = "block";
            document.querySelector(".less").classList.add("showOldPage");
            document.querySelector(".moreProduct").classList.add("hid");
        }
        if (e.currentTarget.classList.contains("less")) {
            document.querySelector(".Phones").style.display = "none";
            document.querySelector(".less").classList.remove("showOldPage");
            document.querySelector(".moreProduct").classList.remove("hid");
        }
    })
})

//filter search

function srch() {
    let search = document.querySelector("input");
    let title = document.querySelectorAll(".pr .card .title");

    title.forEach(el => {
        if (el.textContent.toUpperCase().indexOf(search.value.toUpperCase()) > -1) {
            el.parentElement.parentElement.style.display = "";
        } else {
            el.parentElement.parentElement.style.display = "none";
        }
    })
}
document.querySelector("input").onkeyup = () => {
    srch();
}

//shopping cart


let pageCart = document.querySelector(".cart");
pageCart.addEventListener("click", () => {
    document.location = "Cart.html";

})

let arrProdcuts = [];

let afterRf = [];
if (window.localStorage.getItem("products")) {
    afterRf = JSON.parse(window.localStorage.getItem("products"));
}

function addToCart() {
    let adto = document.querySelectorAll(".pr a");
    adto.forEach(el => {
        el.onclick = (e) => {
            let title = e.target.parentElement.parentElement.querySelector("h5").innerText;
            let price = e.target.parentElement.parentElement.querySelector(".price").innerText;
            let img = e.target.parentElement.parentElement.querySelector("img").src;
            const products = {
                title: title,
                price: price,
                img: img
            }
            arrProdcuts.push(products, afterRf);

            window.localStorage.setItem("products", JSON.stringify(arrProdcuts));

        }
    })
}



/*add to cart for products show par defuat
and send products in localStorage
*/

let btnad = document.querySelectorAll(".Products a");
let arrPr = [];

btnad.forEach(el => {
    el.onclick = (e) => {
        let title = e.target.parentElement.parentElement.querySelector("h5").innerText;
        let price = e.target.parentElement.parentElement.querySelector(".price").innerText;
        let img = e.target.parentElement.parentElement.querySelector("img").src;
        const products = {
            title: title,
            price: price,
            img: img
        }
        arrPr.push(products, afterRf);

        window.localStorage.setItem("products", JSON.stringify(arrPr.flat(20)))
    }
})
// function addToCart(title, price, img) {
//     parntShp.innerHTML += `<div class="product">
//     <div class="img">
//         <img src="${img}">
//     </div>
//     <div class="infoPro">
//         <h4>${title}</h4>
//         <div class="price">
//         <span>${price}</span>
//       </div>
//         <a class="remove" href="#">remove</a>
//     </div>
//     <input value="1" type="number"/>
// </div>`

// }